<!DOCTYPE html>
<html>
<head lang="en">

    <meta charset="UTF-8">
    <title></title>

    <script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/typeahead.js/0.11.1/typeahead.jquery.min.js"></script>
    <script src="../src/FuzzyMatch.js"></script>


</head>
<body class="home">

<style>

    .twitter-typeahead, .twitter-typeahead input {
        width: 500px;
        padding: 10px;
        display: inline-block;
    }

    .title {
        color: #222;
    }

    .title strong {
        color: #000;
    }

    .author {
        color: #666
    }

    .author strong {
        color: #444
    }

    .score {
        color: #888;
    }

    .hh {
        background-color: yellow;
    }

</style>

<input id="demo-query" name="demo-query" autocomplete="off" type="text" width="500px">


<script>


    jQuery.getJSON("books.json").then(function (response) {

        var fuzzyhound = new FuzzyMatch({
            source: response,
            keys: ["title", "author"]
            //highlight_open_str: '<strong class="hh">'
        });

        $('#demo-query').typeahead({
                    minLength: 2
                },
                {
                    name: 'task',
                    source: fuzzyhound,
                    display: "item.title",
                    templates: {
                        suggestion: function (suggestion) {
                            var item = suggestion.item;
                            var query = suggestion._query;
                            return [

                                "<div>",
                                "<span class='title'>", fuzzyhound.highlight(query, item.title), "</span>|<span class='author'>", fuzzyhound.highlight(query, item.author), "</span><br>",
                                "<span class='score'>( ", suggestion.match, " : ", suggestion.score.toFixed(2), " )</span><br><br>",
                                "</div>"

                            ].join("");
                        },
                        notFound: function (context) {
                            return "<div class='typeahead-empty'> No result for \"" + context.query + "\"</div>"
                        }
                    }


                }).bind('typeahead:select', function (ev, suggestion) {
                    alert('Selection: ' + suggestion.item.title);
                });


    });



</script>


</body>
</html>