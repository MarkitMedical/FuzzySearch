/**
 * @license FuzzySearch.js
 * Autocomplete suggestion engine using approximate string matching
 * https://github.com/jeancroy/FuzzySearch
 *
 * Copyright (c) 2015, Jean Christophe Roy
 * Licensed under The MIT License.
 * http://opensource.org/licenses/MIT
 */
!function(){"use strict";function t(e){return void 0===e&&(e={}),this instanceof t?void t.setOptions(this,e,t.defaultOptions,f,!0,this._optionsHook):new t(e)}function e(t,e,r,n,i,s,o){this.normalized=t,this.tokens_groups=e,this.has_tags=r,this.tagged_norm=n,this.tagged_group=i,this.fused_str=s,this.fused_score=0,this.fused_map=o}function r(t,e,r){this.tokens=t,this.map=e,this.gate=r;for(var n=t.length,i=-1,s=new Array(n);++i<n;)s[i]=0;this.score_item=s.slice(),this.score_field=s.slice(),this.field_pos=s}function n(t,e,r,n,i,s){this.item=t,this.fields=e,this.score=r,this.matchIndex=n,this.subIndex=i,this.sortKey=s}function i(t,e){this.item=t,this.fields=e}function s(t,e){var r=e.score-t.score;if(0!==r)return r;var n=t.sortKey,i=e.sortKey;return n>i?1:i>n?-1:0}function o(t,e){var r=e.length,n=0;for(g=-1;++g<r;){var i=e[g],s=i.length;t.substr(n,s)===i&&(n+=s)}return n>0?t.substr(n):t}function a(t){return t?t.toLowerCase().replace(/\s+/g," ").replace(/[^\u0000-\u007E]/g,function(t){return p[t]||t}):""}function u(t,e,r,n){for(var i,s,o,a=e.length;a>n&&(i=e[n++],"*"!==i&&""!==i);){if(!(i in t))return r;t=t[i]}var h=Object.prototype.toString.call(t),f="[object Array]"===h,l="[object Object]"===h;if(n===a)if(f)for(s=-1,o=t.length;++s<o;)r.push(t[s].toString());else if(l)for(i in t)t.hasOwnProperty(i)&&r.push(t[i].toString());else r.push(t.toString());else if("*"===i)if(f)for(s=-1,o=t.length;++s<o;)u(t[s],e,r,n);else if(l)for(i in t)t.hasOwnProperty(i)&&u(t[i],e,r,n);return r}function h(t,e){this.start=t,this.end=e}t.defaultOptions={minimum_match:1,thresh_include:2,thresh_relative_to_best:.5,field_good_enough:20,bonus_match_start:.5,bonus_token_order:2,bonus_position_decay:.7,score_per_token:!0,score_test_fused:!1,score_round:.1,output_limit:0,sorter:s,normalize:a,filter:null,output_map:"item",join_str:", ",token_query_min_length:2,token_field_min_length:3,token_query_max_length:64,token_field_max_length:64,token_fused_max_length:64,token_min_rel_size:.6,token_max_rel_size:6,interactive_debounce:150,interactive_mult:1.2,interactive_burst:3,source:[],keys:[],dirty:!1};var f={tags:[],index:[],tags_re:null,query:null,results:[],start_time:0,search_time:0},l=32;t.setOptions=function(t,e,r,n,i,s){var o;if(i){for(o in r)r.hasOwnProperty(o)&&(t[o]=e.hasOwnProperty(o)&&void 0!==e[o]?e[o]:r[o]);for(o in n)n.hasOwnProperty(o)&&(t[o]=n[o])}else for(o in e)e.hasOwnProperty(o)&&r.hasOwnProperty(o)&&(t[o]=void 0===e[o]?r[o]:e[o]);s.call(t,e)},t.prototype={setOptions:function(e,r){void 0===e&&(e={}),void 0===r&&(r=e.reset||!1),t.setOptions(this,e,t.defaultOptions,f,r,this._optionsHook)},_optionsHook:function(t){"output_map"in t&&"string"==typeof t.output_map&&("alias"===this.output_map?this.output_map=this.aliasResult:this.output_map=o(this.output_map,["root","."]));var e;if("keys"in t&&void 0!==(e=t.keys)){var r,n,i=Object.prototype.toString.call(e);if(this.tags=null,"[object String]"===i)this.keys=e.length?[e]:[];else if("[object Object]"===i){this.keys=[],this.tags=[],r=0;for(var s in e)e.hasOwnProperty(s)&&(this.tags[r]=s,this.keys[r]=e[s],r++)}for(e=this.keys,n=e.length,r=-1;++r<n;)e[r]=o(e[r],["item","."]);this.tags||(this.tags=e),this.tags_re=this._buildTagsRE(this.tags)}("source"in t||"keys"in t)&&(this._prepSource(this.source,this.keys,!0),this.dirty=!1)},_buildTagsRE:function(t){var e=t.length;if(!e)return null;for(var r=/[\-\[\]\/\}\{\(\)\*\+\?\.\\\^\$\|]/g,n=t[0].replace(r,"\\$&"),i=0;++i<e;)n+="|"+t[i].replace(r,"\\$&");return new RegExp("(?:^|\\s)\\s*("+n+"):\\s*","g")},search:function(e){var r=window.performance&&window.performance.now?window.performance:Date,n=r.now();this.start_time=n,this.dirty&&(this._prepSource(this.source,this.keys,!0),this.dirty=!1);var i=this.query=this._prepQuery(e),s=this.index,o=[];this.filter&&(s=this.filter.call(this,s));var a=this._searchIndex(i,s,o);o=t.filterGTE(o,"score",a),"function"==typeof this.sorter&&(o=o.sort(this.sorter)),(this.output_map||this.output_limit>0)&&(o="function"==typeof this.output_map?t.map(o,this.output_map,this,this.output_limit):t.mapField(o,this.output_map,this.output_limit));var u=r.now();return this.search_time=u-n,this.results=o,o},_searchIndex:function(e,r,i){for(var s=this.bonus_position_decay,o=this.field_good_enough,a=this.thresh_relative_to_best,u=this.score_per_token,h=this.score_round,f=this.thresh_include,l=0,_=e.tokens_groups,c=e.tagged_group,p=-1,g=r.length;++p<g;){for(var d=r[p],m=d.fields,v=-1,y=_.length;++v<y;)for(var k=_[v].score_item,w=-1,b=k.length;++w<b;)k[w]=0;e.fused_score=0;for(var x=0,O=-1,z=-1,S=1,q=-1,A=m.length;++q<A;){for(var j=0,F=-1,I=m[q],P=c[q],V=!!P,E=-1,T=I.length;++E<T;){var R,$=I[E];u?(R=this._scoreField($,_),V&&(R+=this._scoreField($,P))):R=t.score_map(e.fused_str,$.join(" "),e.fused_map,this),R>j&&(j=R,F=E)}if(j*=1+S,S*=s,j>x&&(x=j,O=q,z=F,j>o))break}if(u){var H,K,D,G=0;for(v=-1;++v<y;)for(H=_[v].score_item,K=-1,D=H.length;++K<D;)G+=H[K];if(e.has_tags)for(q=-1;++q<A;)if(P=c[q]){var M=P.length;for(v=-1;++v<M;)for(H=P[v].score_item,K=-1,D=H.length;++K<D;)G+=H[K]}e.fused_score>G&&(G=e.fused_score),x=.5*x+.5*G}if(x>l){l=x;var Q=x*a;Q>f&&(f=Q)}x>f&&(x=Math.round(x/h)*h,i.push(new n(d.item,m,x,O,z,m[0][0].join(" "))))}return f},_scoreField:function(e,r){var n=r.length;if(!n)return 0;for(var i,s,o,a,u=e.length,h=0,f=-1,l=this.bonus_token_order,_=this.minimum_match,c=-1;++c<n;){var p=r[c],g=p.tokens,d=g.length,m=1==d,v=p.score_field;for(a=-1;++a<d;)v[a]=0;var y=p.field_pos;for(a=-1;++a<d;)y[a]=0;for(var k=-1;++k<u;)if(s=e[k],m)i=t.score_map(g[0],s,p.map,this),i>v[0]&&(v[0]=i,y[0]=k);else for(o=t.score_pack(p,s,this),a=-1;++a<d;)i=o[a],i>v[a]&&(v[a]=i,y[a]=k);var w=p.score_item;for(a=-1;++a<d;){if(i=v[a],h+=i,i>_){var b=y[a];b>f&&(h+=l,i+=l),f=b}i>w[a]&&(w[a]=i)}}if(this.score_test_fused){var x=t.score_map(query.fused_str,e.join(" "),query.fused_map,this);h=x>h?x:h,x>query.fused_score&&(query.fused_score=x)}return h},_prepQuery:function(r){var n,i,s,o,a,u,h=this.score_per_token,f=this.tags,l=this.tags_re,_=f.length;if(h&&_&&l){var c,p=0,g=0,d=new Array(_+1),m=l.exec(r);for(u=null!=m;null!=m;)c=m.index,d[g]=r.substring(p,c),p=c+m[0].length,g=f.indexOf(m[1])+1,m=l.exec(r);for(d[g]=r.substring(p),i=this.normalize(d[0]),s=t.pack_tokens(t.filterSize(i.split(" "),this.token_query_min_length,this.token_query_max_length)),o=new Array(_),a=new Array(_),n=-1;++n<_;){var v=d[n+1],y=this.normalize(v);a[n]=y,o[n]=v&&0!=v.length?t.pack_tokens(t.filterSize(y.split(" "),this.token_query_min_length,this.token_query_max_length)):null}}else i=this.normalize(r),s=h?t.pack_tokens(t.filterSize(i.split(" "),this.token_query_min_length,this.token_query_max_length)):[],u=!1,o=new Array(_),a=new Array(_);var k=i.substring(0,this.token_fused_max_length),w=this.score_test_fused||!h?t.alphabet(k):{};return new e(i,s,u,a,o,k,w)},_prepSource:function(e,r,n){var s,o=e.length;n?(this.index=new Array(o),s=0):s=o;for(var a=this.index,u=this.token_field_min_length,h=this.token_field_max_length,f=-1;++f<o;){for(var l=e[f],_=t.generateFields(l,r),c=_.length,p=-1;++p<c;)for(var g=_[p],d=-1,m=g.length;++d<m;)g[d]=t.filterSize(this.normalize(g[d]).split(" "),u,h);a[s++]=new i(l,_)}},getInteractive:function(){var t=this,e=this.interactive_debounce,r=this.interactive_mult,n=this.interactive_burst;if(0===e)return function(e,r){return r(t.search(e))};var i,s,o=window.performance&&window.performance.now?window.performance:Date,a=0,u=!1;return function(h,f,l,_){var c=function(){i=null,u&&(s=t.search(h),_(s)),a=0,u=!1};if(clearTimeout(i),i=setTimeout(c,e),++a<n){u=!1;var p=o.now();s=t.search(h);var g=f(s),d=o.now();return e=.5*e+.5*r*(d-p),g}return u=!0,l(s)}},__ttAdapter:function(){var t=this.getInteractive(),e=function(t){};return function(r,n,i){t(r,n,e,i)}},$uiSource:function(){var t=this.getInteractive(),e=function(t){};return function(r,n){t(r.term,n,e,n)}},getMatchingField:function(e){var r=t.generateFields(e.item,[this.keys[e.matchIndex]]);return r[0][e.subIndex]},aliasResult:function(e){for(var r=t.generateFields(e.item,this.keys),n={},i=-1,s=r.length;++i<s;)n[this.tags[i]]=r[i].join(this.join_str);return n._item=e.item,n._score=e.score,n._match=r[e.matchIndex][e.subIndex],n}};for(var _="\xe3\xe0\xe1\xe4\xe2\xe6\u1ebd\xe8\xe9\xeb\xea\xec\xed\xef\xee\xf5\xf2\xf3\xf6\xf4\u0153\xf9\xfa\xfc\xfb\xf1\xe7",c="aaaaaaeeeeeiiiioooooouuuunc",p={},g=0;g<_.length;g++)p[_[g]]=c[g];return t.generateFields=function(t,e){if(!e.length)return[[t.toString()]];for(var r=e.length,n=new Array(r),i=-1;++i<r;)n[i]=u(t,e[i].split("."),[],0);return n},t.filterSize=function(t,e,r){for(var n,i,s=-1,o=-1,a=t.length,u=[];++s<a;)n=t[s],i=n.length,i>=e&&(u[++o]=r>i?n:n.substr(0,r));return u},t.map=function(t,e,r,n){var i=t.length;if(n>0&&i>n&&(i=n),"function"!=typeof e)return t.slice(0,i);for(var s=new Array(i),o=-1;++o<i;)s[o]=e.call(r,t[o],o,t);return s},t.mapField=function(t,e,r){var n=t.length;if(r>0&&n>r&&(n=r),""===e)return t.slice(0,n);var i,s,o=new Array(n);if(-1===e.indexOf("."))for(s=-1;++s<n;)i=t[s],e in i&&(o[s]=i[e]);else{var a=e.split("."),u=a.length;for(s=-1;++s<n;){i=t[s];for(var h=-1;++h<u;){var f=a[h];if(!(f in i))break;i=i[f]}o[s]=i}}return o},t.filterGTE=function(t,e,r){for(var n,i=-1,s=-1,o=t.length,a=[];++i<o;)n=t[i],n[e]>=r&&(a[++s]=n);return a},t.pack_tokens=function(e){for(var n,i=-1,s=e.length,o=[];s>i;){for(var a=[],u={},h=0,f=0;++i<s;){var _=e[i],c=_.length;if(c>=l){n=new r([_],t.posVector(_),4294967295);break}if(c+h>=l){i--;break}a.push(_),t.bitVector(_,u,h),f|=(1<<_.length-1)-1<<h,h+=c}a.length>0&&o.push(new r(a,u,f)),n&&(o.push(n),n=null)}return o},t.alphabet=function(e){var r=e.length;return r>l?t.posVector(e):t.bitVector(e,{},0)},t.mapAlphabet=function(e){for(var r=e.length,n=new Array(r),i=-1;++i<r;){var s=e[i];s.length>l?n[i]=t.posVector(s):n[i]=t.bitVector(s,{},0)}return n},t.bitVector=function(t,e,r){for(var n,i=t.length,s=-1,o=r;++s<i;)n=t[s],n in e?e[n]|=1<<o++:e[n]=1<<o++;return e},t.posVector=function(t){for(var e,r={},n=t.length,i=-1;++i<n;)e=t[i],e in r?r[e].push(i):r[e]=[i];for(e in r)r.hasOwnProperty(e)&&r[e].push(1/0);return r},t.prototype.score=function(e,r){var n=t.alphabet(e);return t.score_map(e,r,n,this)},t.score_map=function(e,r,n,i){var s,o,a=e.length,u=r.length,h=i.bonus_match_start,f=u>a?a:u;if(0===f||u<i.token_min_rel_size*a||u>i.token_max_rel_size*a)return 0;var _=(a+u)/(2*a*u),c=0;if(e===r)c=f;else for(;e[c]===r[c]&&++c<f;);if(c===f)return o=c,_*o*o+h*c;if(a>l)return o=t.llcs_large(e,r,n,c),_*o*o+h*c;var p,g,d=(1<<a)-1,m=d;for(s=c-1;++s<u;)g=r[s],g in n&&(p=m&n[g],m=m+p|m-p);return d&=~((1<<c)-1),m=~m&d,m-=m>>1&1431655765,m=(858993459&m)+(m>>2&858993459),o=16843009*(m+(m>>4)&252645135)>>24,o+=c,_*o*o+h*c},t.score_pack=function(t,e,r){for(var n,i,s=t.tokens,o=s.length,a=4294967295,u=0|t.gate,h=t.map,f=-1,l=e.length;++f<l;)i=e[f],i in h&&(n=a&h[i],a=(a&u)+(n&u)|a-n);a=~a;for(var _=r.bonus_match_start,c=r.token_min_rel_size,p=r.token_max_rel_size,g=new Array(o),d=0,m=-1;++m<o;){var v,y,k=s[m],w=k.length;if(c*w>l||l>p*w)g[m]=0,d+=w;else{if(k===e)y=v=w;else{var b=l>w?w:l;for(y=0;k[y]===e[y]&&++y<b;);v=y;for(var x=(a>>>d&(1<<w)-1)>>>y;x;)x&=x-1,v++}d+=w;var O=(w+l)/(2*w*l);g[m]=O*v*v+_*y}}return g},t.llcs_large=function(t,e,r,n){var i,s,o,a,u,f,l;void 0===n&&(n=0),o=n?[new h(0,n),new h(1/0,1/0)]:[new h(1/0,1/0)];var _,c,p,g,d,m,v=n,y=e.length;for(m=n;y>m;m++){var k=e[m];if(k in r){_=r[k],a=[],u=-1,c=0,s=_[0],l=-1,g=-1;for(var w=o.length;++g<w;){for(f=l,p=o[g],i=p.start,l=p.end,d=l-i;f>s;)s=_[++c];s>=i?a[++u]=p:(s===f?a[u].end++:1===d?(p.start=s,p.end=s+1,a[++u]=p):a[++u]=new h(s,s+1),d>1&&(p.start++,a[++u]=p))}i>s&&(a[++u]=p,v++),o=a}}return v},"function"==typeof require&&"undefined"!=typeof module&&module.exports?module.exports=t:"function"==typeof define&&define.amd?define(function(){return t}):window.FuzzySearch=t,t}();
//# sourceMappingURL=../map/FuzzySearch.map