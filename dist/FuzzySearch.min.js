/**
 * @license FuzzySearch.js
 * Autocomplete suggestion engine using approximate string matching
 * https://github.com/jeancroy/FuzzySearch
 *
 * Copyright (c) 2015, Jean Christophe Roy
 * Licensed under The MIT License.
 * http://opensource.org/licenses/MIT
 */
!function(){"use strict";function t(e){return void 0===e&&(e={}),this instanceof t?void t.setOptions(this,e,t.defaultOptions,l,!0,this._optionsHook):new t(e)}function e(t,e,r,i,n,s){this.normalized=t,this.tokens_groups=e,this.fused_str=r,this.fused_map=i,this.fused_score=0,this.has_children=n,this.children=s}function r(t,e,r){this.tokens=t,this.map=e,this.gate=r;for(var i=t.length,n=-1,s=new Array(i);++n<i;)s[n]=0;this.score_item=s.slice(),this.score_field=s.slice(),this.field_pos=s}function i(t,e,r,i,n,s){this.item=t,this.fields=e,this.score=r,this.matchIndex=i,this.subIndex=n,this.sortKey=s}function n(t,e){this.item=t,this.fields=e}function s(t,e){var r=e.score-t.score;if(0!==r)return r;var i=t.sortKey,n=e.sortKey;return i>n?1:n>i?-1:0}function o(t,e){for(var r=e.length,i=0,n=-1;++n<r;){var s=e[n],o=s.length;t.substr(i,o)===s&&(i+=o)}return i>0?t.substr(i):t}function a(){for(var t="\xe3\xe0\xe1\xe4\xe2\xe6\u1ebd\xe8\xe9\xeb\xea\xec\xed\xef\xee\xf5\xf2\xf3\xf6\xf4\u0153\xf9\xfa\xfc\xfb\xf1\xe7",e="aaaaaaeeeeeiiiioooooouuuunc",r={},i=0;i<t.length;i++)r[t[i]]=e[i];return r}function h(t){return t?t.toLowerCase().replace(/\s+/g," ").replace(/[^\u0000-\u007E]/g,function(t){return _[t]||t}):""}function u(t,e,r,i){for(var n,s,o,a=e.length;a>i&&(n=e[i++],"*"!==n&&""!==n);){if(!(n in t))return r;t=t[n]}var h=Object.prototype.toString.call(t),f="[object Array]"===h,l="[object Object]"===h;if(i===a)if(f)for(s=-1,o=t.length;++s<o;)r.push(t[s].toString());else if(l)for(n in t)t.hasOwnProperty(n)&&r.push(t[n].toString());else r.push(t.toString());else if("*"===n)if(f)for(s=-1,o=t.length;++s<o;)u(t[s],e,r,i);else if(l)for(n in t)t.hasOwnProperty(n)&&u(t[n],e,r,i);return r}function f(t,e){this.start=t,this.end=e}t.defaultOptions={minimum_match:1,thresh_include:2,thresh_relative_to_best:.5,field_good_enough:20,bonus_match_start:.5,bonus_token_order:2,bonus_position_decay:.7,score_per_token:!0,score_test_fused:!1,score_round:.1,output_limit:0,sorter:s,normalize:h,filter:null,output_map:"item",join_str:", ",token_query_min_length:2,token_field_min_length:3,token_query_max_length:64,token_field_max_length:64,token_fused_max_length:64,token_min_rel_size:.6,token_max_rel_size:6,interactive_debounce:150,interactive_mult:1.2,interactive_burst:3,source:[],keys:[],dirty:!1};var l={tags:[],index:[],tags_re:null,query:null,results:[],start_time:0,search_time:0},c=32;t.setOptions=function(t,e,r,i,n,s){var o;if(n){for(o in r)r.hasOwnProperty(o)&&(t[o]=e.hasOwnProperty(o)&&void 0!==e[o]?e[o]:r[o]);for(o in i)i.hasOwnProperty(o)&&(t[o]=i[o])}else for(o in e)e.hasOwnProperty(o)&&r.hasOwnProperty(o)&&(t[o]=void 0===e[o]?r[o]:e[o]);s.call(t,e)},e.prototype.resetItem=function(){for(var t=this.tokens_groups,e=-1,r=t.length;++e<r;)for(var i=t[e].score_item,n=-1,s=i.length;++n<s;)i[n]=0;if(this.fused_score=0,this.has_children)for(var o=this.children,a=-1,h=o.length;++a<h;){var u=o[a];u&&u.resetItem()}},e.prototype.scoreItem=function(){for(var t=0,e=this.tokens_groups,r=-1,i=e.length;++r<i;)for(var n=e[r].score_item,s=-1,o=n.length;++s<o;)t+=n[s];if(this.fused_score>t&&(t=this.fused_score),this.has_children)for(var a=this.children,h=-1,u=a.length;++h<u;){var f=a[h];f&&(t+=f.scoreItem())}return t},t.prototype={setOptions:function(e,r){void 0===e&&(e={}),void 0===r&&(r=e.reset||!1),t.setOptions(this,e,t.defaultOptions,l,r,this._optionsHook)},_optionsHook:function(t){"output_map"in t&&"string"==typeof t.output_map&&("alias"===this.output_map?this.output_map=this.aliasResult:this.output_map=o(this.output_map,["root","."]));var e;if("keys"in t&&void 0!==(e=t.keys)){var r,i,n=Object.prototype.toString.call(e);if(this.tags=null,"[object String]"===n)this.keys=e.length?[e]:[];else if("[object Object]"===n){this.keys=[],this.tags=[],r=0;for(var s in e)e.hasOwnProperty(s)&&(this.tags[r]=s,this.keys[r]=e[s],r++)}for(e=this.keys,i=e.length,r=-1;++r<i;)e[r]=o(e[r],["item","."]);this.tags||(this.tags=e),this.tags_re=this._buildTagsRE(this.tags)}("source"in t||"keys"in t)&&(this._prepSource(this.source,this.keys,!0),this.dirty=!1)},_buildTagsRE:function(t){var e=t.length;if(!e)return null;for(var r=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,i=t[0].replace(r,"\\$&"),n=0;++n<e;)i+="|"+t[n].replace(r,"\\$&");return new RegExp("(?:^|\\s)\\s*("+i+"):\\s*","g")},search:function(e){var r=window.performance&&window.performance.now?window.performance:Date,i=r.now();this.start_time=i,this.dirty&&(this._prepSource(this.source,this.keys,!0),this.dirty=!1);var n=this.query=this._prepQuery(e),s=this.index,o=[];this.filter&&(s=this.filter.call(this,s));var a=this._searchIndex(n,s,o);o=t.filterGTE(o,"score",a),"function"==typeof this.sorter&&(o=o.sort(this.sorter)),(this.output_map||this.output_limit>0)&&(o="function"==typeof this.output_map?t.map(o,this.output_map,this,this.output_limit):t.mapField(o,this.output_map,this.output_limit));var h=r.now();return this.search_time=h-i,this.results=o,o},_searchIndex:function(e,r,n){for(var s=this.bonus_position_decay,o=this.field_good_enough,a=this.thresh_relative_to_best,h=this.score_per_token,u=this.score_round,f=this.thresh_include,l=0,c=e.children,_=-1,p=r.length;++_<p;){var g=r[_],d=g.fields;e.resetItem();for(var v=0,m=-1,y=-1,k=1,w=-1,b=d.length;++w<b;){for(var x=0,O=-1,z=d[w],I=c[w],S=!!I,j=-1,A=z.length;++j<A;){var F,P=z[j];h?(F=this._scoreField(P,e),S&&(F+=this._scoreField(P,I))):F=t.score_map(e.fused_str,P.join(" "),e.fused_map,this),F>x&&(x=F,O=j)}if(x*=1+k,k*=s,x>v&&(v=x,m=w,y=O,x>o))break}if(h){var V=e.scoreItem();v=.5*v+.5*V}if(v>l){l=v;var q=v*a;q>f&&(f=q)}v>f&&(v=Math.round(v/u)*u,n.push(new i(g.item,d,v,m,y,d[0][0].join(" "))))}return f},_scoreField:function(e,r){var i=r.tokens_groups,n=i.length;if(!n)return 0;for(var s,o,a,h,u=e.length,f=0,l=-1,c=this.bonus_token_order,_=this.minimum_match,p=-1;++p<n;){var g=i[p],d=g.tokens,v=d.length,m=1==v,y=g.score_field;for(h=-1;++h<v;)y[h]=0;var k=g.field_pos;for(h=-1;++h<v;)k[h]=0;for(var w=-1;++w<u;)if(o=e[w],m)s=t.score_map(d[0],o,g.map,this),s>y[0]&&(y[0]=s,k[0]=w);else for(a=t.score_pack(g,o,this),h=-1;++h<v;)s=a[h],s>y[h]&&(y[h]=s,k[h]=w);var b=g.score_item;for(h=-1;++h<v;){if(s=y[h],f+=s,s>_){var x=k[h];x>l&&(f+=c,s+=c),l=x}s>b[h]&&(b[h]=s)}}if(this.score_test_fused){var O=t.score_map(r.fused_str,e.join(" "),r.fused_map,this);f=O>f?O:f,O>r.fused_score&&(r.fused_score=O)}return f},_prepQuery:function(r){var i,n,s,o,a,h,u=this.score_per_token,f=this.score_test_fused,l=this.token_fused_max_length,c=this.token_field_min_length,_=this.token_field_max_length,p=this.tags,g=this.tags_re,d=p.length;if(u&&d&&g){var v,m=0,y=0,k=new Array(d+1),w=g.exec(r);for(a=null!=w;null!=w;)v=w.index,k[y]=r.substring(m,v),m=v+w[0].length,y=p.indexOf(w[1])+1,w=g.exec(r);k[y]=r.substring(m),o=new Array(d);for(var b=-1;++b<d;){var x=k[b+1];x&&x.length&&(i=this.normalize(x),n=i.substring(0,l),s=f||!u?t.alphabet(n):{},h=t.pack_tokens(t.filterSize(i.split(" "),c,_)),o[b]=new e(i,h,n,s,!1,[]))}i=this.normalize(k[0]),h=t.pack_tokens(t.filterSize(i.split(" "),c,_))}else i=this.normalize(r),h=u?t.pack_tokens(t.filterSize(i.split(" "),this.token_query_min_length,this.token_query_max_length)):[],a=!1,o=new Array(d);return n=i.substring(0,l),s=f||!u?t.alphabet(n):{},new e(i,h,n,s,a,o)},_prepSource:function(e,r,i){var s,o=e.length;i?(this.index=new Array(o),s=0):s=o;for(var a=this.index,h=this.token_field_min_length,u=this.token_field_max_length,f=-1;++f<o;){for(var l=e[f],c=t.generateFields(l,r),_=c.length,p=-1;++p<_;)for(var g=c[p],d=-1,v=g.length;++d<v;)g[d]=t.filterSize(this.normalize(g[d]).split(" "),h,u);a[s++]=new n(l,c)}},getInteractive:function(){var t=this,e=this.interactive_debounce,r=this.interactive_mult,i=this.interactive_burst;if(0===e)return function(e,r){return r(t.search(e))};var n,s,o=window.performance&&window.performance.now?window.performance:Date,a=0,h=!1;return function(u,f,l,c){var _=function(){n=null,h&&(s=t.search(u),c(s)),a=0,h=!1};if(clearTimeout(n),n=setTimeout(_,e),++a<i){h=!1;var p=o.now();s=t.search(u);var g=f(s),d=o.now();return e=.5*e+.5*r*(d-p),g}return h=!0,l(s)}},__ttAdapter:function(){var t=this.getInteractive(),e=function(t){};return function(r,i,n){t(r,i,e,n)}},$uiSource:function(){var t=this.getInteractive(),e=function(t){};return function(r,i){t(r.term,i,e,i)}},getMatchingField:function(e){var r=t.generateFields(e.item,[this.keys[e.matchIndex]]);return r[0][e.subIndex]},aliasResult:function(e){for(var r=t.generateFields(e.item,this.keys),i={},n=-1,s=r.length;++n<s;)i[this.tags[n]]=r[n].join(this.join_str);return i._item=e.item,i._score=e.score,i._match=r[e.matchIndex][e.subIndex],i}};var _=a();return t.generateFields=function(t,e){if(!e.length)return[[t.toString()]];for(var r=e.length,i=new Array(r),n=-1;++n<r;)i[n]=u(t,e[n].split("."),[],0);return i},t.filterSize=function(t,e,r){for(var i,n,s=-1,o=-1,a=t.length,h=[];++s<a;)i=t[s],n=i.length,n>=e&&(h[++o]=r>n?i:i.substr(0,r));return h},t.map=function(t,e,r,i){var n=t.length;if(i>0&&n>i&&(n=i),"function"!=typeof e)return t.slice(0,n);for(var s=new Array(n),o=-1;++o<n;)s[o]=e.call(r,t[o],o,t);return s},t.mapField=function(t,e,r){var i=t.length;if(r>0&&i>r&&(i=r),""===e)return t.slice(0,i);var n,s,o=new Array(i);if(-1===e.indexOf("."))for(s=-1;++s<i;)n=t[s],e in n&&(o[s]=n[e]);else{var a=e.split("."),h=a.length;for(s=-1;++s<i;){n=t[s];for(var u=-1;++u<h;){var f=a[u];if(!(f in n))break;n=n[f]}o[s]=n}}return o},t.filterGTE=function(t,e,r){for(var i,n=-1,s=-1,o=t.length,a=[];++n<o;)i=t[n],i[e]>=r&&(a[++s]=i);return a},t.pack_tokens=function(e){for(var i,n=-1,s=e.length,o=[];s>n;){for(var a=[],h={},u=0,f=0;++n<s;){var l=e[n],_=l.length;if(_>=c){i=new r([l],t.posVector(l),4294967295);break}if(_+u>=c){n--;break}a.push(l),t.bitVector(l,h,u),f|=(1<<l.length-1)-1<<u,u+=_}a.length>0&&o.push(new r(a,h,f)),i&&(o.push(i),i=null)}return o},t.alphabet=function(e){var r=e.length;return r>c?t.posVector(e):t.bitVector(e,{},0)},t.mapAlphabet=function(e){for(var r=e.length,i=new Array(r),n=-1;++n<r;){var s=e[n];s.length>c?i[n]=t.posVector(s):i[n]=t.bitVector(s,{},0)}return i},t.bitVector=function(t,e,r){for(var i,n=t.length,s=-1,o=r;++s<n;)i=t[s],i in e?e[i]|=1<<o++:e[i]=1<<o++;return e},t.posVector=function(t){for(var e,r={},i=t.length,n=-1;++n<i;)e=t[n],e in r?r[e].push(n):r[e]=[n];for(e in r)r.hasOwnProperty(e)&&r[e].push(1/0);return r},t.prototype.score=function(e,r){var i=t.alphabet(e);return t.score_map(e,r,i,this)},t.score_map=function(e,r,i,n){var s,o,a=e.length,h=r.length,u=n.bonus_match_start,f=h>a?a:h;if(0===f||h<n.token_min_rel_size*a||h>n.token_max_rel_size*a)return 0;var l=(a+h)/(2*a*h),_=0;if(e===r)_=f;else for(;e[_]===r[_]&&++_<f;);if(_===f)return o=_,l*o*o+u*_;if(a>c)return o=t.llcs_large(e,r,i,_),l*o*o+u*_;var p,g,d=(1<<a)-1,v=d;for(s=_-1;++s<h;)g=r[s],g in i&&(p=v&i[g],v=v+p|v-p);return d&=~((1<<_)-1),v=~v&d,v-=v>>1&1431655765,v=(858993459&v)+(v>>2&858993459),o=16843009*(v+(v>>4)&252645135)>>24,o+=_,l*o*o+u*_},t.score_pack=function(t,e,r){for(var i,n,s=t.tokens,o=s.length,a=4294967295,h=0|t.gate,u=t.map,f=-1,l=e.length;++f<l;)n=e[f],n in u&&(i=a&u[n],a=(a&h)+(i&h)|a-i);a=~a;for(var c=r.bonus_match_start,_=r.token_min_rel_size,p=r.token_max_rel_size,g=new Array(o),d=0,v=-1;++v<o;){var m,y,k=s[v],w=k.length;if(_*w>l||l>p*w)g[v]=0,d+=w;else{if(k===e)y=m=w;else{var b=l>w?w:l;for(y=0;k[y]===e[y]&&++y<b;);m=y;for(var x=(a>>>d&(1<<w)-1)>>>y;x;)x&=x-1,m++}d+=w;var O=(w+l)/(2*w*l);g[v]=O*m*m+c*y}}return g},t.llcs_large=function(t,e,r,i){var n,s,o,a,h,u,l;void 0===i&&(i=0),o=i?[new f(0,i),new f(1/0,1/0)]:[new f(1/0,1/0)];var c,_,p,g,d,v,m=i,y=e.length;for(v=i;y>v;v++){var k=e[v];if(k in r){c=r[k],a=[],h=-1,_=0,s=c[0],l=-1,g=-1;for(var w=o.length;++g<w;){for(u=l,p=o[g],n=p.start,l=p.end,d=l-n;u>s;)s=c[++_];s>=n?a[++h]=p:(s===u?a[h].end++:1===d?(p.start=s,p.end=s+1,a[++h]=p):a[++h]=new f(s,s+1),d>1&&(p.start++,a[++h]=p))}n>s&&(a[++h]=p,m++),o=a}}return m},"function"==typeof require&&"undefined"!=typeof module&&module.exports?module.exports=t:"function"==typeof define&&define.amd?define(function(){return t}):window.FuzzySearch=t,t}();
//# sourceMappingURL=../map/FuzzySearch.map