/**
 * @license FuzzySearch.js
 * Autocomplete suggestion engine using approximate string matching
 * https://github.com/jeancroy/FuzzySearch
 *
 * Copyright (c) 2015, Jean Christophe Roy
 * Licensed under The MIT License.
 * http://opensource.org/licenses/MIT
 */
!function(){"use strict";function t(e){return void 0===e&&(e={}),this instanceof t?void t.setOptions(this,e,t.defaultOptions,_,!0,this._optionsHook):new t(e)}function e(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])}function r(t,e,r,n,i,s){this.normalized=t,this.tokens_groups=e,this.fused_str=r,this.fused_map=n,this.fused_score=0,this.has_children=i,this.children=s}function n(t,e,r){this.tokens=t,this.map=e,this.gate=r;for(var n=t.length,i=-1,s=new Array(n);++i<n;)s[i]=0;this.score_item=s.slice(),this.score_field=s.slice(),this.field_pos=s}function i(t,e,r,n,i,s){this.item=t,this.fields=e,this.score=r,this.matchIndex=n,this.subIndex=i,this.sortKey=s}function s(t,e){this.item=t,this.fields=e}function o(t,e){var r=e.score-t.score;if(0!==r)return r;var n=t.sortKey,i=e.sortKey;return n>i?1:i>n?-1:0}function a(t,e){for(var r=e.length,n=0,i=-1;++i<r;){var s=e[i],o=s.length;t.substr(n,o)===s&&(n+=o)}return n>0?t.substr(n):t}function h(t){return t?t.toLowerCase().replace(/\s+/g," ").replace(/[^\u0000-\u007E]/g,function(t){return g[t]||t}):""}function u(){for(var t="\xe3\xe0\xe1\xe4\xe2\xe6\u1ebd\xe8\xe9\xeb\xea\xec\xed\xef\xee\xf5\xf2\xf3\xf6\xf4\u0153\xf9\xfa\xfc\xfb\xf1\xe7",e="aaaaaaeeeeeiiiioooooouuuunc",r={},n=0;n<t.length;n++)r[t[n]]=e[n];return r}function f(t){var e=/[\-\[\]\/\{}\(\)\*\+\?\.\\\^\$\|]/g;return t.replace(e,"\\$&")}function l(t,e,r,n){for(var i,s,o,a=e.length;a>n&&(i=e[n++],"*"!==i&&""!==i);){if(!(i in t))return r;t=t[i]}var h=Object.prototype.toString.call(t),u="[object Array]"===h,f="[object Object]"===h;if(n===a)if(u)for(s=-1,o=t.length;++s<o;)r.push(t[s].toString());else if(f)for(i in t)t.hasOwnProperty(i)&&r.push(t[i].toString());else r.push(t.toString());else if("*"===i)if(u)for(s=-1,o=t.length;++s<o;)l(t[s],e,r,n);else if(f)for(i in t)t.hasOwnProperty(i)&&l(t[i],e,r,n);return r}function c(t,e){this.start=t,this.end=e}t.defaultOptions={minimum_match:1,thresh_include:2,thresh_relative_to_best:.5,field_good_enough:20,bonus_match_start:.5,bonus_token_order:2,bonus_position_decay:.7,score_per_token:!0,score_test_fused:!1,score_acronym:!1,acronym_tok:" .,-:",score_round:.1,output_limit:0,sorter:o,normalize:h,filter:null,output_map:"item",join_str:", ",token_query_min_length:2,token_field_min_length:3,token_query_max_length:64,token_field_max_length:64,token_fused_max_length:64,token_min_rel_size:.6,token_max_rel_size:10,interactive_debounce:150,interactive_mult:1.2,interactive_burst:3,source:[],keys:[],dirty:!1,lazy:!1};var _={tags:[],index:[],tags_re:null,acro_re:null,query:null,results:[],start_time:0,search_time:0},p=32;t.setOptions=function(t,e,r,n,i,s){var o;if(i){for(o in r)r.hasOwnProperty(o)&&(t[o]=e.hasOwnProperty(o)&&void 0!==e[o]?e[o]:r[o]);for(o in n)n.hasOwnProperty(o)&&(t[o]=n[o])}else for(o in e)e.hasOwnProperty(o)&&r.hasOwnProperty(o)&&(t[o]=void 0===e[o]?r[o]:e[o]);s.call(t,e)},e(t.prototype,{search:function(e){var r=window.performance&&window.performance.now?window.performance:Date,n=r.now();this.start_time=n,this.dirty&&(this._prepSource(this.source,this.keys,!0),this.dirty=!1);var i=this.query=this._prepQuery(e),s=this.index,o=[];this.filter&&(s=this.filter.call(this,s));var a=this._searchIndex(i,s,o);o=t.filterGTE(o,"score",a),"function"==typeof this.sorter&&(o=o.sort(this.sorter)),(this.output_map||this.output_limit>0)&&(o="function"==typeof this.output_map?t.map(o,this.output_map,this,this.output_limit):t.mapField(o,this.output_map,this.output_limit));var h=r.now();return this.search_time=h-n,this.results=o,o},_searchIndex:function(e,r,n){for(var s=this.bonus_position_decay,o=this.field_good_enough,a=this.thresh_relative_to_best,h=this.score_per_token,u=this.score_round,f=this.thresh_include,l=0,c=e.children,_=-1,p=r.length;++_<p;){var g=r[_],d=g.fields;e.resetItem();for(var m=0,v=-1,y=-1,k=1,w=-1,b=d.length;++w<b;){for(var x=0,O=-1,z=d[w],I=c[w],S=!!I,A=-1,j=z.length;++A<j;){var F,P=z[A];h?(F=this._scoreField(P,e),S&&(F+=this._scoreField(P,I))):F=t.score_map(e.fused_str,P.join(" "),e.fused_map,this),F>x&&(x=F,O=A)}if(x*=1+k,k*=s,x>m&&(m=x,v=w,y=O,x>o))break}if(h){var E=e.scoreItem();m=.5*m+.5*E}if(m>l){l=m;var R=m*a;R>f&&(f=R)}m>f&&(m=Math.round(m/u)*u,n.push(new i(g.item,d,m,v,y,d[0][0].join(" "))))}return f},_scoreField:function(e,r){var n=r.tokens_groups,i=n.length;if(!i)return 0;for(var s,o,a,h,u=e.length,f=0,l=-1,c=this.bonus_token_order,_=this.minimum_match,p=-1;++p<i;){var g=n[p],d=g.tokens,m=d.length,v=1==m,y=g.score_field;for(h=-1;++h<m;)y[h]=0;var k=g.field_pos;for(h=-1;++h<m;)k[h]=0;for(var w=-1;++w<u;)if(o=e[w],v)s=t.score_map(d[0],o,g.map,this),s>y[0]&&(y[0]=s,k[0]=w);else for(a=t.score_pack(g,o,this),h=-1;++h<m;)s=a[h],s>y[h]&&(y[h]=s,k[h]=w);var b=g.score_item;for(h=-1;++h<m;){if(s=y[h],f+=s,s>_){var x=k[h];x>l&&(f+=c,s+=c),l=x}s>b[h]&&(b[h]=s)}}if(this.score_test_fused){var O=t.score_map(r.fused_str,e.join(" "),r.fused_map,this);f=O>f?O:f,O>r.fused_score&&(r.fused_score=O)}return f},setOptions:function(e,r){void 0===r&&(r=e.reset||!1),t.setOptions(this,e,t.defaultOptions,_,r,this._optionsHook)},_optionsHook:function(t){"output_map"in t&&"string"==typeof t.output_map&&("alias"===this.output_map?this.output_map=this.aliasResult:this.output_map=a(this.output_map,["root","."]));var e;if("keys"in t&&void 0!==(e=t.keys)){var r,n,i=Object.prototype.toString.call(e);if(this.tags=null,"[object String]"===i)this.keys=e.length?[e]:[];else if("[object Object]"===i){this.keys=[],this.tags=[],r=0;for(var s in e)e.hasOwnProperty(s)&&(this.tags[r]=s,this.keys[r]=e[s],r++)}for(e=this.keys,n=e.length,r=-1;++r<n;)e[r]=a(e[r],["item","."]);this.tags||(this.tags=e),this.tags_re=this._buildTagsRE(this.tags)}(null==this.acro_re||"acronym_tok"in t)&&(this.acro_re=this._buildAcronymRE(this.acronym_tok)),(this.dirty||"source"in t||"keys"in t)&&(this.lazy?this.dirty=!0:(this._prepSource(this.source,this.keys,!0),this.dirty=!1))},_buildTagsRE:function(t){var e=t.length;if(!e)return null;for(var r=f(t[0]),n=0;++n<e;)r+="|"+f(t[n]);return new RegExp("(?:^|\\s)\\s*("+r+"):\\s*","g")},_buildAcronymRE:function(t){var e=t.length;if(!e)return null;var r=f(t);return new RegExp("(?:^|["+r+"])+([^"+r+"])[^"+r+"]*","g")},_prepSource:function(e,r,n){var i,o=e.length;n?(this.index=new Array(o),i=0):i=o;for(var a=this.index,h=this.token_field_min_length,u=this.token_field_max_length,f=this.score_acronym,l=this.acro_re,c=-1;++c<o;){for(var _=e[c],p=t.generateFields(_,r),g=p.length,d=-1;++d<g;)for(var m=p[d],v=-1,y=m.length;++v<y;){var k=this.normalize(m[v]),w=t.filterSize(k.split(" "),h,u);f&&w.push(k.replace(l,"$1")),m[v]=w}a[i++]=new s(_,p)}},_prepQuery:function(e){var n,i,s,o,a,h,u=this.score_per_token,f=this.score_test_fused,l=this.token_fused_max_length,c=this.token_field_min_length,_=this.token_field_max_length,p=this.tags,g=this.tags_re,d=p.length;if(u&&d&&g){var m,v=0,y=0,k=new Array(d+1),w=g.exec(e);for(a=null!=w;null!=w;)m=w.index,k[y]=e.substring(v,m),v=m+w[0].length,y=p.indexOf(w[1])+1,w=g.exec(e);k[y]=e.substring(v),o=new Array(d);for(var b=-1;++b<d;){var x=k[b+1];x&&x.length&&(n=this.normalize(x),i=n.substring(0,l),s=f||!u?t.alphabet(i):{},h=t.pack_tokens(t.filterSize(n.split(" "),c,_)),o[b]=new r(n,h,i,s,!1,[]))}n=this.normalize(k[0]),h=t.pack_tokens(t.filterSize(n.split(" "),c,_))}else n=this.normalize(e),h=u?t.pack_tokens(t.filterSize(n.split(" "),this.token_query_min_length,this.token_query_max_length)):[],a=!1,o=new Array(d);return i=n.substring(0,l),s=f||!u?t.alphabet(i):{},new r(n,h,i,s,a,o)},getMatchingField:function(e){var r=t.generateFields(e.item,[this.keys[e.matchIndex]]);return r[0][e.subIndex]},aliasResult:function(e){for(var r=t.generateFields(e.item,this.keys),n={},i=-1,s=r.length;++i<s;)n[this.tags[i]]=r[i].join(this.join_str);return n._item=e.item,n._score=e.score,n._match=r[e.matchIndex][e.subIndex],n},getInteractive:function(){var t=this,e=this.interactive_debounce,r=this.interactive_mult,n=this.interactive_burst;if(0===e)return function(e,r,n,i){return r(t.search(e))};var i,s,o=window.performance&&window.performance.now?window.performance:Date,a=0,h=!1;return function(u,f,l,c){var _=function(){i=null,h&&(s=t.search(u),c(s)),a=0,h=!1};if(clearTimeout(i),i=setTimeout(_,e),++a<n){h=!1;var p=o.now();s=t.search(u);var g=f(s),d=o.now();return e=.5*e+.5*r*(d-p),g}return h=!0,l(s)}},__ttAdapter:function(){var t=this.getInteractive(),e=function(t){};return function(r,n,i){t(r,n,e,i)}},$uiSource:function(){var t=this.getInteractive(),e=function(t){};return function(r,n){t(r.term,n,e,n)}}}),r.prototype.resetItem=function(){for(var t=this.tokens_groups,e=-1,r=t.length;++e<r;)for(var n=t[e].score_item,i=-1,s=n.length;++i<s;)n[i]=0;if(this.fused_score=0,this.has_children)for(var o=this.children,a=-1,h=o.length;++a<h;){var u=o[a];u&&u.resetItem()}},r.prototype.scoreItem=function(){for(var t=0,e=this.tokens_groups,r=-1,n=e.length;++r<n;)for(var i=e[r].score_item,s=-1,o=i.length;++s<o;)t+=i[s];if(this.fused_score>t&&(t=this.fused_score),this.has_children)for(var a=this.children,h=-1,u=a.length;++h<u;){var f=a[h];f&&(t+=f.scoreItem())}return t};var g=u();return t.generateFields=function(t,e){if(!e.length)return[[t.toString()]];for(var r=e.length,n=new Array(r),i=-1;++i<r;)n[i]=l(t,e[i].split("."),[],0);return n},t.filterSize=function(t,e,r){for(var n,i,s=-1,o=-1,a=t.length,h=[];++s<a;)n=t[s],i=n.length,i>=e&&(h[++o]=r>i?n:n.substr(0,r));return h},t.map=function(t,e,r,n){var i=t.length;if(n>0&&i>n&&(i=n),"function"!=typeof e)return t.slice(0,i);for(var s=new Array(i),o=-1;++o<i;)s[o]=e.call(r,t[o],o,t);return s},t.mapField=function(t,e,r){var n=t.length;if(r>0&&n>r&&(n=r),""===e)return t.slice(0,n);var i,s,o=new Array(n);if(-1===e.indexOf("."))for(s=-1;++s<n;)i=t[s],e in i&&(o[s]=i[e]);else{var a=e.split("."),h=a.length;for(s=-1;++s<n;){i=t[s];for(var u=-1;++u<h;){var f=a[u];if(!(f in i))break;i=i[f]}o[s]=i}}return o},t.filterGTE=function(t,e,r){for(var n,i=-1,s=-1,o=t.length,a=[];++i<o;)n=t[i],n[e]>=r&&(a[++s]=n);return a},t.alphabet=function(e){var r=e.length;return r>p?t.posVector(e):t.bitVector(e,{},0)},t.mapAlphabet=function(e){for(var r=e.length,n=new Array(r),i=-1;++i<r;){var s=e[i];s.length>p?n[i]=t.posVector(s):n[i]=t.bitVector(s,{},0)}return n},t.bitVector=function(t,e,r){for(var n,i=t.length,s=-1,o=r;++s<i;)n=t[s],n in e?e[n]|=1<<o++:e[n]=1<<o++;return e},t.posVector=function(t){for(var e,r={},n=t.length,i=-1;++i<n;)e=t[i],e in r?r[e].push(i):r[e]=[i];for(e in r)r.hasOwnProperty(e)&&r[e].push(1/0);return r},t.pack_tokens=function(e){for(var r,i=-1,s=e.length,o=[];s>i;){for(var a=[],h={},u=0,f=0;++i<s;){var l=e[i],c=l.length;if(c>=p){r=new n([l],t.posVector(l),4294967295);break}if(c+u>=p){i--;break}a.push(l),t.bitVector(l,h,u),f|=(1<<l.length-1)-1<<u,u+=c}a.length>0&&o.push(new n(a,h,f)),r&&(o.push(r),r=null)}return o},t.prototype.score=function(e,r){var n=t.alphabet(e);return t.score_map(e,r,n,this)},t.score_map=function(e,r,n,i){var s,o,a=e.length,h=r.length,u=i.bonus_match_start,f=h>a?a:h;if(0===f||h<i.token_min_rel_size*a||h>i.token_max_rel_size*a)return 0;var l=(a+h)/(2*a*h),c=0;if(e===r)c=f;else for(;e[c]===r[c]&&++c<f;);if(c===f)return o=c,l*o*o+u*c;if(a>p)return o=t.llcs_large(e,r,n,c),l*o*o+u*c;var _,g,d=(1<<a)-1,m=d;for(s=c-1;++s<h;)g=r[s],g in n&&(_=m&n[g],m=m+_|m-_);return d&=~((1<<c)-1),m=~m&d,m-=m>>1&1431655765,m=(858993459&m)+(m>>2&858993459),o=16843009*(m+(m>>4)&252645135)>>24,o+=c,l*o*o+u*c},t.score_pack=function(t,e,r){for(var n,i,s=t.tokens,o=s.length,a=4294967295,h=0|t.gate,u=t.map,f=-1,l=e.length;++f<l;)i=e[f],i in u&&(n=a&u[i],a=(a&h)+(n&h)|a-n);a=~a;for(var c=r.bonus_match_start,_=r.token_min_rel_size,p=r.token_max_rel_size,g=new Array(o),d=0,m=-1;++m<o;){var v,y,k=s[m],w=k.length;if(_*w>l||l>p*w)g[m]=0,d+=w;else{if(k===e)y=v=w;else{var b=l>w?w:l;for(y=0;k[y]===e[y]&&++y<b;);v=y;for(var x=(a>>>d&(1<<w)-1)>>>y;x;)x&=x-1,v++}d+=w;var O=(w+l)/(2*w*l);g[m]=O*v*v+c*y}}return g},t.llcs_large=function(t,e,r,n){var i,s,o,a,h,u;void 0===n&&(n=0),o=n?[new c(0,n),new c(1/0,1/0)]:[new c(1/0,1/0)];var f,l,_,p,g,d,m=n,v=o.length,y=e.length;for(d=n;y>d;d++){var k=e[d];if(k in r){f=r[k];var w=new Array(Math.min(2*v,m+2));for(a=-1,l=0,s=f[0],u=-1,p=-1;++p<v;){for(h=u,_=o[p],i=_.start,u=_.end,g=u-i;h>s;)s=f[++l];s>=i?w[++a]=_:(s===h?w[a].end++:1===g?(_.start=s,_.end=s+1,w[++a]=_):w[++a]=new c(s,s+1),g>1&&(_.start++,w[++a]=_))}i>s&&(w[++a]=_,m++),o=w,v=++a}}return m},"function"==typeof require&&"undefined"!=typeof module&&module.exports?module.exports=t:"function"==typeof define&&define.amd?define(function(){return t}):window.FuzzySearch=t,t}();
//# sourceMappingURL=../map/FuzzySearch.map