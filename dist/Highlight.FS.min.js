/**
 * @license Highlight.FuzzySearch.js
 * Highlight plugin for FuzzySearch
 * https://github.com/jeancroy/FuzzySearch
 *
 * Copyright (c) 2015, Jean Christophe Roy
 * Licensed under The MIT License.
 * http://opensource.org/licenses/MIT
 */
!function(){function r(r,t,i){var n,h,a=r.length,s=[];for(n=0;a>n;n++)s[n]={};var o,g=e(r,s,0,0,i),l=0;for(n=0;a>n&&(o=s[n][l],o);n++)t[n]=h=o.index,h>-1&&(l|=1<<h);return g}function e(r,i,n,a,s){var o=r.length,g=r[a].length;g>h&&(g=h);var l,f,u,c=s[a],p=0,v=-1,_=o-1>a,m=i[a+1];for(l=0;g>l;l++){var d=1<<l;n&d||(f=r[a][l],c>f||(_&&(u=n|d,f+=u in m?m[u].score:e(r,i,u,a+1,s)),f>p&&(p=f,v=l)))}return _&&(u=n,f=u in m?m[u].score:e(r,i,u,a+1,s),f>p&&(p=f,v=-1)),i[a][n]=new t(p,v),p}function t(r,e){this.score=r,this.index=e}function i(r,e){var t,i,n=r.slice();for(r.length=e,t=0;e>t;t++)r[t]=-1;for(t=0;t<n.length;t++)i=n[t],i>-1&&e>i&&(r[i]=t)}var n;n="function"==typeof require?require("FuzzySearch"):window.FuzzySearch;var h=32,a={highlight_prefix:!1,highlight_bridge_gap:2,highlight_before:'<strong class="highlight">',highlight_after:"</strong>"},s=n.defaultOptions;for(var o in a)a.hasOwnProperty(o)&&(s[o]=a[o]);n.prototype.highlight=function(r,e){var t,i,h=this.query.normalized;return e&&e.length&&(t=this.tags.indexOf(e))>-1&&(i=this.query.children[t])&&(h+=(h.length?" ":"")+i.normalized),n.highlight(h,r,this)},n.highlight=function(r,e,t){if(void 0===t&&(t=n.defaultOptions),!e)return"";var i=t.highlight_before,h=t.highlight_after,a=t.score_per_token,s=t.score_test_fused,o=t.score_acronym,g=t.normalize(r).trim(),l=t.normalize(e).trim(),f=g.split(" "),u=l.split(" "),c=e.split(/\s+/),p=[],v=[],_=0,m=0;if(a&&(m=n.matchTokens(f,u,v,t,!0)),(s||!a||o)&&(_=n.score_map(g,l,n.alphabet(g),t)),0===m&&0===_)return e;(!a||_>m)&&(f=[g],u=[l],c=[c.join(" ")],v=[0]);for(var d=c.length,b=-1;++b<d;){var y=v[b];if(-1!==y){var x=f[y],k=u[b],w=c[b],z=0,O=[],M=[];n.align(x,k,O,M);for(var q=O.length,A=-1;++A<q;){var j=O[A],F=M[A];j>z&&p.push(w.substring(z,j)),p.push(i+w.substring(j,F)+h),z=F}p.push(w.substring(z)+" ")}else p.push(c[b]+" ")}return p.join("")},n.align=function(r,e,t,i,h){void 0===h&&(h=n.defaultOptions);var a,s,o=100,g=-10,l=-1,f=0,u=1,c=2,p=3,v=h.score_acronym,_=h.acronym_tok,m=Math.min(r.length+1,h.token_query_max_length),d=Math.min(e.length+1,h.token_field_max_length),b=d>m?m:d,y=0;if(r===e)y=m,m=0;else if(h.highlight_prefix){for(a=0;b>a&&r[a]===e[a];a++)y++;y&&(r=r.substring(y),e=e.substring(y),m-=y,d-=y)}var x=0,k=0,w=0,z=new Array(m*d),O=d-1;if(m>1&&d>1){var M,q,A,j,F=new Array(d),S=new Array(d),T=0;for(s=0;d>s;s++)S[s]=0,F[s]=0,z[s]=f;for(a=1;m>a;a++)for(T=0,M=F[0],O++,z[O]=f,s=1;d>s;s++)switch(j=S[s]=Math.max(S[s]+l,F[s]+g),T=Math.max(T+l,F[s-1]+g),A=v?r[a-1]!==e[s-1]?-(1/0):M+o+(2>a||_.indexOf(r[a-2])>-1?o:0)+(2>s||_.indexOf(e[s-2])>-1?o:0):r[a-1]===e[s-1]?M+o:-(1/0),M=F[s],q=F[s]=Math.max(A,j,T,0),O++,q){case A:z[O]=p,q>x&&(x=q,k=a,w=s);break;case T:z[O]=c;break;case j:z[O]=u;break;default:z[O]=f}}var P=h.highlight_bridge_gap,B=0;if(x>0){a=k,s=w,O=a*d+s,B=w,i.push(w+y);for(var C=!0;C;)switch(z[O]){case u:a--,O-=d;break;case c:s--,O--;break;case p:B-s>P&&(t.push(B+y),i.push(s+y)),s--,a--,B=s,O-=d+1;break;case f:default:C=!1}t.push(B+y)}return y&&(B>0&&P>=B?t[t.length-1]=0:(t.push(0),i.push(y))),t.reverse(),i.reverse(),x+y},n.matchTokens=function(e,t,h,a,s){void 0===a&&(a=n.defaultOptions),void 0==s&&(s=!1);var o,g,l,f,u,c,p,v=a.minimum_match,_=a.thresh_relative_to_best,m=[],d=e.length,b=t.length,y=n.mapAlphabet(e),x=v,k=-1,w=-1,z=0,O=[];for(o=0;d>o;o++)if(l=[],h[o]=-1,x=v,f=e[o],f.length){for(c=y[o],g=0;b>g;g++)u=t[g],u.length?(p=n.score_map(f,u,c,a),l[g]=p,p>v&&z++,p>x&&(x=p,k=o,w=g)):l[g]=0;O[o]=x,m[o]=l}else for(g=0;b>g;g++)l[g]=0;if(0===z)return 0;if(1===z)return h[k]=w,s&&i(h,b),x;for(o=0;o<e.length;o++)O[o]=Math.max(_*O[o],v);var M=r(m,h,O);return s&&i(h,b),M}}();
//# sourceMappingURL=../map/Highlight.FS.map